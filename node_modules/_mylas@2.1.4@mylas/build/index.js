var ie=(e,t)=>()=>(e&&(t=e(e=0)),t);var _=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var c,a=ie(()=>{c=typeof document=="undefined"?new(require("url")).URL("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("main.js",document.baseURI).href});var m=_(S=>{a();"use strict";Object.defineProperty(S,"__esModule",{value:!0});S.Method=void 0;var ne;(function(e){e[e.loadFile=0]="loadFile",e[e.saveFile=1]="saveFile",e[e.loadJson=2]="loadJson",e[e.loadJsonComments=3]="loadJsonComments",e[e.saveJson=4]="saveJson",e[e.loadBuffer=5]="loadBuffer",e[e.saveBuffer=6]="saveBuffer"})(ne=S.Method||(S.Method={}))});var M=_(u=>{a();"use strict";var $=u&&u.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(u,"__esModule",{value:!0});u.checkPerm=u.checkPath=u.checkDir=u.checkPathSync=void 0;var f=$(require("fs")),I=$(require("path")),ue=e=>!e.includes("\\")&&!e.includes("/")?e.includes("."):(0,u.checkDir)(e)==!0;u.checkPathSync=ue;var oe=e=>{let t=I.default.parse(e),r=t.dir;return r==""||f.default.existsSync(r)||f.default.mkdirSync(t.dir,{recursive:!0}),!!f.default.existsSync(r)};u.checkDir=oe;var le=async e=>!e.includes("\\")&&!e.includes("/")?e.includes("."):!((0,u.checkDir)(e)!=!0||await(0,u.checkPerm)(e)!=!0);u.checkPath=le;var fe=async e=>{let t=I.default.parse(e);return f.default.existsSync(e)&&await f.default.promises.access(e,f.default.constants.R_OK|f.default.constants.W_OK).catch(()=>{throw new Error("Permissions error")}),await f.default.promises.access(t.dir,f.default.constants.R_OK|f.default.constants.W_OK).catch(()=>{throw new Error("Permissions error")}),!0};u.checkPerm=fe});var g=_(P=>{a();"use strict";var ce=P&&P.__rest||function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(r[s[n]]=e[s[n]]);return r};Object.defineProperty(P,"__esModule",{value:!0});var de=require("worker_threads"),_e=e=>{var{callback:t}=e,r=ce(e,["callback"]);return new Promise((s,n)=>{let l;new de.Worker("./build/worker.js").once("message",o=>l=o).once("exit",o=>o==0?s(l):n(o)).once("error",o=>n(o)).once("messageerror",o=>n(o)).postMessage(r)}).then(s=>(t==null||t(s),s),s=>{throw new Error(s)})};P.default=_e});var H=_(k=>{a();"use strict";var R=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(k,"__esModule",{value:!0});var K=R(require("fs")),L=m(),z=M(),G=R(g()),ve={load:async(e,t)=>{if(await(0,z.checkPath)(e)==!0){let r=await K.default.promises.readFile(e);return t==null||t(r),r}else throw new Error(`Can't read from ${e}`)},save:async(e,t,r)=>{if(await(0,z.checkPath)(e)==!0)await K.default.promises.writeFile(e,t),r==null||r();else throw new Error(`Can't write to ${e}`)},loadW:async(e,t)=>{let r=await(0,G.default)({method:L.Method.loadBuffer,path:e});return t==null||t(Buffer.from(r)),Buffer.from(r)},saveW:async(e,t,r)=>{let s=new Uint8Array(new SharedArrayBuffer(t.byteLength));s.set(t),await(0,G.default)({method:L.Method.saveBuffer,path:e,data:s,callback:r})}};k.default=ve});var j=_(p=>{a();"use strict";var Q=p&&p.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(p,"__esModule",{value:!0});var W=Q(require("fs")),T=m(),C=M(),V=Q(g()),he={loadS:e=>{if((0,C.checkPathSync)(e)==!0)return W.default.readFileSync(e,"utf8");throw new Error(`Can't read from ${e}`)},saveS:(e,t)=>{if((0,C.checkPathSync)(e)==!0)W.default.writeFileSync(e,t,"utf8");else throw new Error(`Can't write to ${e}`)},load:async(e,t)=>{if(await(0,C.checkPath)(e)==!0){let r=await W.default.promises.readFile(e,"utf8");return t==null||t(r),r}else throw new Error(`Can't read from ${e}`)},save:async(e,t,r)=>{if(await(0,C.checkPath)(e)==!0)await W.default.promises.writeFile(e,t,"utf8"),r==null||r();else throw new Error(`Can't write to ${e}`)},loadW:(e,t)=>(0,V.default)({method:T.Method.loadFile,path:e,callback:t}),saveW:(e,t,r)=>(0,V.default)({method:T.Method.saveFile,path:e,data:t,callback:r})};p.default=he});var A=_(O=>{a();"use strict";var X=O&&O.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(O,"__esModule",{value:!0});var E=m(),h=X(j()),Y=X(g()),ye={loadS:(e,t=!1)=>JSON.parse(t?Z(h.default.loadS(e)):h.default.loadS(e)),saveS:(e,t)=>h.default.saveS(e,JSON.stringify(t)),load:async(e,t,r=!1)=>{let s=JSON.parse(r?Z(await h.default.load(e)):await h.default.load(e));return t==null||t(s),s},save:async(e,t,r)=>{await h.default.save(e,JSON.stringify(t)),r==null||r()},loadW:(e,t,r=!1)=>(0,Y.default)({method:r?E.Method.loadJsonComments:E.Method.loadJson,path:e,callback:t}),saveW:(e,t,r)=>(0,Y.default)({method:E.Method.saveJson,path:e,data:t,callback:r})};O.default=ye;function Z(e){let t=(i,v)=>{let D=0;for(;i[v]==="\\";)v--,D++;return!(D%2)},r=!1,s=!1,n=!1,l=0,o="";for(let i=0;i<e.length;i++){let v=e[i]||"",D=e[i+1]||"",B=!(n||s);if(B&&v==='"'&&t(e,i-1)&&(r=!r),r)continue;let J=v+D;if(B&&J==="//")o+=e.slice(l,i),l=i,s=!0,i++;else if(s&&J===`\r
`){i++,s=!1,l=i;continue}else if(s&&v===`
`)s=!1,l=i;else if(B&&J==="/*"){o+=e.slice(l,i),l=i,n=!0,i++;continue}else if(n&&J==="*/"){i++,n=!1,l=i+1;continue}}return(o+(n||s?"":e.slice(l))).replace(/,(?!\s*?[{["'\w])/g,"")}});var x=_(q=>{a();"use strict";var we=q&&q.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(q,"__esModule",{value:!0});var y=we(require("fs")),b=M(),Se={mkS:e=>{(0,b.checkPathSync)(e)&&y.default.mkdirSync(e,{recursive:!0})},rmS:e=>{(0,b.checkPathSync)(e)&&y.default.rmdirSync(e)},checkS:e=>y.default.existsSync(e),mk:async(e,t)=>{await(0,b.checkPath)(e)&&await y.default.promises.mkdir(e,{recursive:!0}),t==null||t()},rm:async(e,t)=>{await(0,b.checkPath)(e)&&await y.default.promises.rmdir(e),t==null||t()},check:async(e,t)=>{let r=y.default.existsSync(e);return t==null||t(r),r}};q.default=Se});var te=_(F=>{a();"use strict";var ee=F&&F.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(F,"__esModule",{value:!0});var d=ee(j()),w=ee(A());String.load=d.default.load;String.save=d.default.save;String.loadS=d.default.loadS;String.saveS=d.default.saveS;String.loadW=d.default.loadW;String.saveW=d.default.saveW;String.prototype.save=async function(e,t){await d.default.save(e,String(this),t)};String.prototype.saveS=function(e){d.default.saveS(e,String(this))};String.prototype.saveW=async function(e,t){await d.default.saveW(e,String(this),t)};JSON.load=w.default.load;JSON.save=w.default.save;JSON.loadS=w.default.loadS;JSON.saveS=w.default.saveS;JSON.loadW=w.default.loadW;JSON.saveW=w.default.saveW});a();"use strict";var N=exports&&exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});exports.Method=exports.Buf=exports.File=exports.Dir=exports.Json=void 0;var re=N(H());exports.Buf=re.default;var U=N(j());exports.File=U.default;var se=N(A());exports.Json=se.default;var ae=N(x());exports.Dir=ae.default;te();var me=Object.assign({json:se.default,file:U.default,dir:ae.default,buf:re.default},U.default);exports.default=me;var Pe=m();Object.defineProperty(exports,"Method",{enumerable:!0,get:function(){return Pe.Method}});
